<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BitcoinFinder - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .content {
            padding: 40px;
        }

        .form-section {
            margin-bottom: 40px;
            padding: 30px;
            border: 1px solid #e1e8ed;
            border-radius: 10px;
            background: #f8f9fa;
        }

        .form-section h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.5em;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2c3e50;
        }

        .form-group input, .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e1e8ed;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: #667eea;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .checkbox-group input[type="checkbox"] {
            width: auto;
            margin: 0;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-right: 10px;
            margin-bottom: 10px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #5a6268;
        }

        .btn-success {
            background: #28a745;
            color: white;
        }

        .btn-success:hover {
            background: #218838;
        }

        .btn-danger {
            background: #dc3545;
            color: white;
        }

        .btn-danger:hover {
            background: #c82333;
        }

        .status {
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: none;
        }

        .status.success {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
        }

        .status.error {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
        }

        .status.warning {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 20px;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .log-container {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            max-height: 300px;
            overflow-y: auto;
            margin-top: 20px;
        }

        .log-entry {
            margin-bottom: 5px;
            padding: 5px;
            border-radius: 4px;
        }

        .log-entry.info {
            background: rgba(52, 152, 219, 0.2);
        }

        .log-entry.success {
            background: rgba(46, 204, 113, 0.2);
        }

        .log-entry.error {
            background: rgba(231, 76, 60, 0.2);
        }

        .log-entry.warning {
            background: rgba(243, 156, 18, 0.2);
        }

        .tabs {
            display: flex;
            border-bottom: 2px solid #e1e8ed;
            margin-bottom: 30px;
        }

        .tab {
            padding: 15px 30px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .tab.active {
            border-bottom-color: #667eea;
            color: #667eea;
        }

        .tab:hover {
            background: #f8f9fa;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .metric-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            text-align: center;
        }

        .metric-value {
            font-size: 2em;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 5px;
        }

        .metric-label {
            color: #6c757d;
            font-size: 0.9em;
        }

        @media (max-width: 768px) {
            .content {
                padding: 20px;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üîß –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö</h1>
            <p>BitcoinFinder Web Server - –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å</p>
        </div>

        <div class="content">
            <div class="tabs">
                <div class="tab active" onclick="showTab('setup')">–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ë–î</div>
                <div class="tab" onclick="showTab('seed')">–ü–µ—Ä–µ–±–æ—Ä Seed-—Ñ—Ä–∞–∑</div>
                <div class="tab" onclick="showTab('agents')">–ê–≥–µ–Ω—Ç—ã</div>
                <div class="tab" onclick="showTab('status')">–°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã</div>
                <div class="tab" onclick="showTab('keepalive')">Keep-Alive</div>
            </div>

            <!-- –í–∫–ª–∞–¥–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö -->
            <div id="setup" class="tab-content active">
                <div class="form-section">
                    <h2>üìä –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö</h2>
                    
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="databaseName">–ò–º—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö *</label>
                            <input type="text" id="databaseName" value="BitcoinFinderDB" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="server">–°–µ—Ä–≤–µ—Ä *</label>
                            <input type="text" id="server" value="localhost" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="port">–ü–æ—Ä—Ç *</label>
                            <input type="number" id="port" value="1433" min="1" max="65535" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="username">–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</label>
                            <input type="text" id="username" placeholder="sa">
                        </div>
                        
                        <div class="form-group">
                            <label for="password">–ü–∞—Ä–æ–ª—å</label>
                            <input type="password" id="password" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å">
                        </div>
                        
                        <div class="form-group">
                            <label for="authType">–¢–∏–ø –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏</label>
                            <select id="authType" onchange="toggleAuthFields()">
                                <option value="sql">SQL Server Authentication</option>
                                <option value="windows">Windows Authentication</option>
                            </select>
                        </div>
                    </div>

                    <div class="checkbox-group">
                        <input type="checkbox" id="createDatabase" checked>
                        <label for="createDatabase">–°–æ–∑–¥–∞—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö</label>
                    </div>
                    
                    <div class="checkbox-group">
                        <input type="checkbox" id="installSchema" checked>
                        <label for="installSchema">–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å—Ö–µ–º—É</label>
                    </div>
                    
                    <div class="checkbox-group">
                        <input type="checkbox" id="installSeedData">
                        <label for="installSeedData">–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–∞—á–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</label>
                    </div>

                    <div class="status" id="setupStatus"></div>
                    
                    <div class="loading" id="setupLoading">
                        <div class="spinner"></div>
                        <p>–í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö...</p>
                    </div>

                    <button class="btn btn-primary" onclick="testConnection()">üîç –¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è</button>
                    <button class="btn btn-success" onclick="installDatabase()">üöÄ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö</button>
                    <button class="btn btn-secondary" onclick="getSchemaInfo()">üìã –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å—Ö–µ–º–µ</button>
                </div>

                <div class="log-container" id="setupLog"></div>
            </div>

            <!-- –í–∫–ª–∞–¥–∫–∞ –ø–µ—Ä–µ–±–æ—Ä–∞ seed-—Ñ—Ä–∞–∑ -->
            <div id="seed" class="tab-content">
                <div class="form-section">
                    <h2>üîë –ü–µ—Ä–µ–±–æ—Ä Seed-—Ñ—Ä–∞–∑</h2>
                    <div class="form-group">
                        <label for="seedPhrase">Seed-—Ñ—Ä–∞–∑–∞ (–∏–ª–∏ –º–∞—Å–∫–∞)</label>
                        <input type="text" id="seedPhrase" placeholder="–í–≤–µ–¥–∏—Ç–µ seed-—Ñ—Ä–∞–∑—É –∏–ª–∏ –º–∞—Å–∫—É">
                    </div>
                    <div class="form-group">
                        <label for="address">–û–∂–∏–¥–∞–µ–º—ã–π –∞–¥—Ä–µ—Å (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)</label>
                        <input type="text" id="address" placeholder="1...">
                    </div>
                    <button class="btn btn-primary" onclick="startSeedSearch()">üöÄ –ù–∞—á–∞—Ç—å –ø–µ—Ä–µ–±–æ—Ä</button>
                    <button class="btn btn-secondary" onclick="stopSeedSearch()">‚èπÔ∏è –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å</button>
                    <div class="status" id="seedStatus"></div>
                    <div class="log-container" id="seedLog"></div>
                </div>
                <div class="form-section">
                    <h2>üìù –î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É (seed-—Ñ—Ä–∞–∑—É)</h2>
                    <div class="form-group">
                        <input type="text" id="newSeedTask" placeholder="–í–≤–µ–¥–∏—Ç–µ seed-—Ñ—Ä–∞–∑—É –∏–ª–∏ –º–∞—Å–∫—É">
                        <button class="btn btn-success" onclick="addSeedTask()">–î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É</button>
                    </div>
                    <div class="log-container" id="seedTaskLog"></div>
                </div>
                <div class="form-section">
                    <h2>üìã –ê–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏ –ø–µ—Ä–µ–±–æ—Ä–∞</h2>
                    <table style="width:100%;background:#fff;color:#222;border-radius:8px;overflow:hidden;">
                        <thead><tr><th>Seed-—Ñ—Ä–∞–∑–∞</th><th>–°—Ç–∞—Ç—É—Å</th><th>–ü–æ—Ç–æ–∫–∏</th><th>–î–µ–π—Å—Ç–≤–∏—è</th></tr></thead>
                        <tbody id="seedTasksTable"></tbody>
                    </table>
                </div>
            </div>

            <!-- –í–∫–ª–∞–¥–∫–∞ –∞–≥–µ–Ω—Ç–æ–≤ -->
            <div id="agents" class="tab-content">
                <div class="form-section">
                    <h2>ü§ñ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞–º–∏</h2>
                    <button class="btn btn-primary" onclick="loadAgents()">üîÑ –û–±–Ω–æ–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫</button>
                    <div class="status" id="agentsStatus"></div>
                    <table style="width:100%;margin-top:20px;background:#fff;color:#222;border-radius:8px;overflow:hidden;">
                        <thead><tr><th>–ò–º—è</th><th>–°—Ç–∞—Ç—É—Å</th><th>–ü–æ—Ç–æ–∫–∏</th><th>–ü–æ—Å–ª–µ–¥–Ω–∏–π –æ–Ω–ª–∞–π–Ω</th><th>–î–µ–π—Å—Ç–≤–∏—è</th></tr></thead>
                        <tbody id="agentsTable"></tbody>
                    </table>
                </div>
            </div>

            <!-- –í–∫–ª–∞–¥–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–∏—Å—Ç–µ–º—ã -->
            <div id="status" class="tab-content">
                <div class="form-section">
                    <h2>üìà –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã</h2>
                    
                    <div class="metrics-grid" id="metricsGrid">
                        <!-- –ú–µ—Ç—Ä–∏–∫–∏ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                    </div>

                    <div class="status" id="statusStatus"></div>
                    
                    <div class="loading" id="statusLoading">
                        <div class="spinner"></div>
                        <p>–ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–∏—Å—Ç–µ–º—ã...</p>
                    </div>

                    <button class="btn btn-primary" onclick="loadSystemStatus()">üîÑ –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å</button>
                    <button class="btn btn-success" onclick="loadHealthCheck()">üè• –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è</button>
                    <button class="btn btn-secondary" onclick="loadMetrics()">üìä –ú–µ—Ç—Ä–∏–∫–∏</button>
                </div>

                <div class="log-container" id="statusLog"></div>
            </div>

            <!-- –í–∫–ª–∞–¥–∫–∞ Keep-Alive -->
            <div id="keepalive" class="tab-content">
                <div class="form-section">
                    <h2>üíì Keep-Alive –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥</h2>
                    
                    <div class="status" id="keepaliveStatus"></div>
                    
                    <div class="loading" id="keepaliveLoading">
                        <div class="spinner"></div>
                        <p>–ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∞...</p>
                    </div>

                    <button class="btn btn-primary" onclick="pingServer()">üèì Ping —Å–µ—Ä–≤–µ—Ä–∞</button>
                    <button class="btn btn-success" onclick="activateServices()">‚ö° –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å —Å–µ—Ä–≤–∏—Å—ã</button>
                    <button class="btn btn-secondary" onclick="startKeepAlive()">üîÑ –ó–∞–ø—É—Å—Ç–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥</button>
                    <button class="btn btn-danger" onclick="stopKeepAlive()">‚èπÔ∏è –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥</button>
                </div>

                <div class="log-container" id="keepaliveLog"></div>
            </div>
        </div>
    </div>

    <script>
        let keepAliveInterval = null;
        const baseUrl = window.location.origin;

        // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–∫–ª–∞–¥–∫–∞–º–∏
        function showTab(tabName) {
            // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ –≤–∫–ª–∞–¥–∫–∏
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é –≤–∫–ª–∞–¥–∫—É
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');

            // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≤–∫–ª–∞–¥–∫–∏
            if (tabName === 'status') {
                loadSystemStatus();
            } else if (tabName === 'keepalive') {
                pingServer();
            }
        }

        // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—è–º–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
        function toggleAuthFields() {
            const authType = document.getElementById('authType').value;
            const usernameField = document.getElementById('username').parentElement;
            const passwordField = document.getElementById('password').parentElement;

            if (authType === 'windows') {
                usernameField.style.display = 'none';
                passwordField.style.display = 'none';
            } else {
                usernameField.style.display = 'block';
                passwordField.style.display = 'block';
            }
        }

        // –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
        function log(message, type = 'info', containerId = 'setupLog') {
            const logContainer = document.getElementById(containerId);
            const timestamp = new Date().toLocaleTimeString();
            const logEntry = document.createElement('div');
            logEntry.className = `log-entry ${type}`;
            logEntry.textContent = `[${timestamp}] ${message}`;
            logContainer.appendChild(logEntry);
            logContainer.scrollTop = logContainer.scrollHeight;
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç—É—Å
        function showStatus(message, type = 'info', containerId = 'setupStatus') {
            const statusElement = document.getElementById(containerId);
            statusElement.textContent = message;
            statusElement.className = `status ${type}`;
            statusElement.style.display = 'block';
        }

        // –°–∫—Ä—ã—Ç—å —Å—Ç–∞—Ç—É—Å
        function hideStatus(containerId = 'setupStatus') {
            document.getElementById(containerId).style.display = 'none';
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å/—Å–∫—Ä—ã—Ç—å –∑–∞–≥—Ä—É–∑–∫—É
        function showLoading(containerId = 'setupLoading') {
            document.getElementById(containerId).style.display = 'block';
        }

        function hideLoading(containerId = 'setupLoading') {
            document.getElementById(containerId).style.display = 'none';
        }

        // –ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –ë–î –∏–∑ —Ñ–æ—Ä–º—ã
        function getDatabaseConfig() {
            const authType = document.getElementById('authType').value;
            return {
                databaseName: document.getElementById('databaseName').value,
                server: document.getElementById('server').value,
                port: parseInt(document.getElementById('port').value),
                username: authType === 'windows' ? '' : document.getElementById('username').value,
                password: authType === 'windows' ? '' : document.getElementById('password').value,
                useWindowsAuthentication: authType === 'windows'
            };
        }

        // –¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î
        async function testConnection() {
            const config = getDatabaseConfig();
            
            showLoading('setupLoading');
            hideStatus('setupStatus');
            log('–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö...', 'info');

            try {
                const response = await fetch(`${baseUrl}/api/database/test-connection`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(config)
                });

                const result = await response.json();
                
                if (response.ok) {
                    showStatus('‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö —É—Å–ø–µ—à–Ω–æ', 'success', 'setupStatus');
                    log('–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö —É—Å–ø–µ—à–Ω–æ', 'success');
                } else {
                    showStatus('‚ùå –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö', 'error', 'setupStatus');
                    log(`–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è: ${result.message}`, 'error');
                }
            } catch (error) {
                showStatus('‚ùå –û—à–∏–±–∫–∞ —Å–µ—Ç–∏ –ø—Ä–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è', 'error', 'setupStatus');
                log(`–û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ${error.message}`, 'error');
            } finally {
                hideLoading('setupLoading');
            }
        }

        // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
        async function installDatabase() {
            const config = getDatabaseConfig();
            const request = {
                config: config,
                createDatabase: document.getElementById('createDatabase').checked,
                installSchema: document.getElementById('installSchema').checked,
                installSeedData: document.getElementById('installSeedData').checked
            };

            showLoading('setupLoading');
            hideStatus('setupStatus');
            log('–ù–∞—á–∏–Ω–∞–µ–º —É—Å—Ç–∞–Ω–æ–≤–∫—É –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö...', 'info');

            try {
                const response = await fetch(`${baseUrl}/api/database/install`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(request)
                });

                const result = await response.json();
                
                if (response.ok) {
                    showStatus('‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —É—Å–ø–µ—à–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞', 'success', 'setupStatus');
                    log(`–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞: ${result.message}`, 'success');
                    
                    if (result.warnings && result.warnings.length > 0) {
                        result.warnings.forEach(warning => {
                            log(`‚ö†Ô∏è –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ: ${warning}`, 'warning');
                        });
                    }
                } else {
                    showStatus('‚ùå –û—à–∏–±–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö', 'error', 'setupStatus');
                    log(`–û—à–∏–±–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏: ${result.message}`, 'error');
                    
                    if (result.errors && result.errors.length > 0) {
                        result.errors.forEach(error => {
                            log(`‚ùå –û—à–∏–±–∫–∞: ${error}`, 'error');
                        });
                    }
                }
            } catch (error) {
                showStatus('‚ùå –û—à–∏–±–∫–∞ —Å–µ—Ç–∏ –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ', 'error', 'setupStatus');
                log(`–û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ${error.message}`, 'error');
            } finally {
                hideLoading('setupLoading');
            }
        }

        // –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å—Ö–µ–º–µ
        async function getSchemaInfo() {
            showLoading('setupLoading');
            log('–ó–∞–≥—Ä—É–∑–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å—Ö–µ–º–µ...', 'info');

            try {
                const response = await fetch(`${baseUrl}/api/database/schema-info`);
                const result = await response.json();
                
                if (response.ok) {
                    log('üìã –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å—Ö–µ–º–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:', 'info');
                    log(`–í–µ—Ä—Å–∏—è: ${result.version}`, 'info');
                    log(`–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: ${new Date(result.lastUpdated).toLocaleString()}`, 'info');
                    log('–¢–∞–±–ª–∏—Ü—ã:', 'info');
                    result.tables.forEach(table => {
                        log(`  - ${table.name}: ${table.description}`, 'info');
                    });
                } else {
                    log(`–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å—Ö–µ–º–µ: ${result.message}`, 'error');
                }
            } catch (error) {
                log(`–û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ${error.message}`, 'error');
            } finally {
                hideLoading('setupLoading');
            }
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–∏—Å—Ç–µ–º—ã
        async function loadSystemStatus() {
            showLoading('statusLoading');
            hideStatus('statusStatus');
            log('–ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–∏—Å—Ç–µ–º—ã...', 'info', 'statusLog');

            try {
                const response = await fetch(`${baseUrl}/api/keepalive/status`);
                const result = await response.json();
                
                if (response.ok) {
                    showStatus('‚úÖ –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã –∑–∞–≥—Ä—É–∂–µ–Ω', 'success', 'statusStatus');
                    updateMetricsGrid(result);
                    log('–°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã –∑–∞–≥—Ä—É–∂–µ–Ω —É—Å–ø–µ—à–Ω–æ', 'success', 'statusLog');
                } else {
                    showStatus('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç–∞—Ç—É—Å–∞', 'error', 'statusStatus');
                    log(`–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç–∞—Ç—É—Å–∞: ${result.message}`, 'error', 'statusLog');
                }
            } catch (error) {
                showStatus('‚ùå –û—à–∏–±–∫–∞ —Å–µ—Ç–∏', 'error', 'statusStatus');
                log(`–û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ${error.message}`, 'error', 'statusLog');
            } finally {
                hideLoading('statusLoading');
            }
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ—Ç–∫–∏ –º–µ—Ç—Ä–∏–∫
        function updateMetricsGrid(status) {
            const metricsGrid = document.getElementById('metricsGrid');
            metricsGrid.innerHTML = '';

            const metrics = [
                { label: '–ê–∫—Ç–∏–≤–Ω—ã–µ –∞–≥–µ–Ω—Ç—ã', value: status.statistics?.activeAgents || 0 },
                { label: '–û–∂–∏–¥–∞—é—â–∏–µ –∑–∞–¥–∞—á–∏', value: status.statistics?.pendingTasks || 0 },
                { label: '–ó–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏', value: status.statistics?.completedTasks || 0 },
                { label: '–û–±—Ä–∞–±–æ—Ç–∞–Ω–æ –±–ª–æ–∫–æ–≤', value: status.statistics?.totalProcessedBlocks || 0 },
                { label: '–í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã', value: formatUptime(status.uptime) },
                { label: '–ü—Ä–æ—Ü–µ—Å—Å–æ–≤', value: status.systemInfo?.processorCount || 0 }
            ];

            metrics.forEach(metric => {
                const card = document.createElement('div');
                card.className = 'metric-card';
                card.innerHTML = `
                    <div class="metric-value">${metric.value}</div>
                    <div class="metric-label">${metric.label}</div>
                `;
                metricsGrid.appendChild(card);
            });
        }

        // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ —Ä–∞–±–æ—Ç—ã
        function formatUptime(uptime) {
            if (!uptime) return 'N/A';
            const hours = Math.floor(uptime / 3600);
            const minutes = Math.floor((uptime % 3600) / 60);
            return `${hours}—á ${minutes}–º`;
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–∏—Å—Ç–µ–º—ã
        async function loadHealthCheck() {
            showLoading('statusLoading');
            log('–ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–∏—Å—Ç–µ–º—ã...', 'info', 'statusLog');

            try {
                const response = await fetch(`${baseUrl}/api/keepalive/health`);
                const result = await response.json();
                
                if (response.ok) {
                    log(`üè• –°—Ç–∞—Ç—É—Å –∑–¥–æ—Ä–æ–≤—å—è: ${result.status}`, 'info', 'statusLog');
                    result.checks.forEach(check => {
                        const icon = check.status === 'Healthy' ? '‚úÖ' : '‚ùå';
                        log(`${icon} ${check.component}: ${check.message}`, check.status === 'Healthy' ? 'success' : 'error', 'statusLog');
                    });
                } else {
                    log(`–û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–¥–æ—Ä–æ–≤—å—è: ${result.message}`, 'error', 'statusLog');
                }
            } catch (error) {
                log(`–û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ${error.message}`, 'error', 'statusLog');
            } finally {
                hideLoading('statusLoading');
            }
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –º–µ—Ç—Ä–∏–∫
        async function loadMetrics() {
            showLoading('statusLoading');
            log('–ó–∞–≥—Ä—É–∑–∫–∞ –º–µ—Ç—Ä–∏–∫ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏...', 'info', 'statusLog');

            try {
                const response = await fetch(`${baseUrl}/api/keepalive/metrics`);
                const result = await response.json();
                
                if (response.ok) {
                    log('üìä –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:', 'info', 'statusLog');
                    log(`–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏: ${result.performance?.memoryUsage?.toFixed(2) || 0} MB`, 'info', 'statusLog');
                    log(`–ê–∫—Ç–∏–≤–Ω—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è: ${result.performance?.activeConnections || 0}`, 'info', 'statusLog');
                    log(`–ó–∞–¥–∞—á –≤ —Å–µ–∫—É–Ω–¥—É: ${result.performance?.tasksPerSecond || 0}`, 'info', 'statusLog');
                    log(`–ë–ª–æ–∫–æ–≤ –≤ —Å–µ–∫—É–Ω–¥—É: ${result.performance?.blocksPerSecond || 0}`, 'info', 'statusLog');
                } else {
                    log(`–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –º–µ—Ç—Ä–∏–∫: ${result.message}`, 'error', 'statusLog');
                }
            } catch (error) {
                log(`–û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ${error.message}`, 'error', 'statusLog');
            } finally {
                hideLoading('statusLoading');
            }
        }

        // Ping —Å–µ—Ä–≤–µ—Ä–∞
        async function pingServer() {
            showLoading('keepaliveLoading');
            hideStatus('keepaliveStatus');
            log('–û—Ç–ø—Ä–∞–≤–∫–∞ ping –∑–∞–ø—Ä–æ—Å–∞...', 'info', 'keepaliveLog');

            try {
                const response = await fetch(`${baseUrl}/api/keepalive/ping`);
                const result = await response.json();
                
                if (response.ok) {
                    showStatus('‚úÖ –°–µ—Ä–≤–µ—Ä –∞–∫—Ç–∏–≤–µ–Ω', 'success', 'keepaliveStatus');
                    log(`üèì Ping —É—Å–ø–µ—à–µ–Ω: ${result.message}`, 'success', 'keepaliveLog');
                    log(`–í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞: ${new Date(result.timestamp).toLocaleString()}`, 'info', 'keepaliveLog');
                } else {
                    showStatus('‚ùå –°–µ—Ä–≤–µ—Ä –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç', 'error', 'keepaliveStatus');
                    log(`–û—à–∏–±–∫–∞ ping: ${result.message}`, 'error', 'keepaliveLog');
                }
            } catch (error) {
                showStatus('‚ùå –û—à–∏–±–∫–∞ —Å–µ—Ç–∏', 'error', 'keepaliveStatus');
                log(`–û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ${error.message}`, 'error', 'keepaliveLog');
            } finally {
                hideLoading('keepaliveLoading');
            }
        }

        // –ê–∫—Ç–∏–≤–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤
        async function activateServices() {
            showLoading('keepaliveLoading');
            log('–ê–∫—Ç–∏–≤–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤...', 'info', 'keepaliveLog');

            try {
                const response = await fetch(`${baseUrl}/api/keepalive/activate`, {
                    method: 'POST'
                });
                const result = await response.json();
                
                if (response.ok) {
                    showStatus('‚úÖ –°–µ—Ä–≤–∏—Å—ã –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω—ã', 'success', 'keepaliveStatus');
                    log(`‚ö° –ê–∫—Ç–∏–≤–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞: ${result.message}`, 'success', 'keepaliveLog');
                } else {
                    showStatus('‚ùå –û—à–∏–±–∫–∞ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏', 'error', 'keepaliveStatus');
                    log(`–û—à–∏–±–∫–∞ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏: ${result.error}`, 'error', 'keepaliveLog');
                }
            } catch (error) {
                showStatus('‚ùå –û—à–∏–±–∫–∞ —Å–µ—Ç–∏', 'error', 'keepaliveStatus');
                log(`–û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ${error.message}`, 'error', 'keepaliveLog');
            } finally {
                hideLoading('keepaliveLoading');
            }
        }

        // –ó–∞–ø—É—Å–∫ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ Keep-Alive
        function startKeepAlive() {
            if (keepAliveInterval) {
                log('–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —É–∂–µ –∑–∞–ø—É—â–µ–Ω', 'warning', 'keepaliveLog');
                return;
            }

            log('üîÑ –ó–∞–ø—É—Å–∫ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ Keep-Alive (–∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥)...', 'info', 'keepaliveLog');
            keepAliveInterval = setInterval(async () => {
                try {
                    const response = await fetch(`${baseUrl}/api/keepalive/ping`);
                    if (response.ok) {
                        log('üèì Keep-Alive ping —É—Å–ø–µ—à–µ–Ω', 'success', 'keepaliveLog');
                    } else {
                        log('‚ùå Keep-Alive ping –Ω–µ—É–¥–∞—á–µ–Ω', 'error', 'keepaliveLog');
                    }
                } catch (error) {
                    log(`‚ùå Keep-Alive –æ—à–∏–±–∫–∞: ${error.message}`, 'error', 'keepaliveLog');
                }
            }, 30000); // 30 —Å–µ–∫—É–Ω–¥

            showStatus('‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ Keep-Alive –∑–∞–ø—É—â–µ–Ω', 'success', 'keepaliveStatus');
        }

        // –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ Keep-Alive
        function stopKeepAlive() {
            if (keepAliveInterval) {
                clearInterval(keepAliveInterval);
                keepAliveInterval = null;
                log('‚èπÔ∏è –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ Keep-Alive –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω', 'info', 'keepaliveLog');
                showStatus('‚èπÔ∏è –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω', 'warning', 'keepaliveStatus');
            } else {
                log('–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–µ –±—ã–ª –∑–∞–ø—É—â–µ–Ω', 'warning', 'keepaliveLog');
            }
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', function() {
            log('üöÄ –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö –∑–∞–≥—Ä—É–∂–µ–Ω', 'info');
            toggleAuthFields(); // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –ø–æ–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
            fetch('/api/auth/config').then(r => {
                if (r.status === 401) window.location.href = '/login.html';
            });
            // –ö–Ω–æ–ø–∫–∞ –≤—ã—Ö–æ–¥–∞
            function logout() {
                fetch('/api/auth/logout', { method: 'POST' }).then(() => window.location.href = '/login.html');
            }
        });

        function startSeedSearch() {
            const seedPhrase = document.getElementById('seedPhrase').value.trim();
            const address = document.getElementById('address').value.trim();
            if (!seedPhrase || !address) {
                showStatus('–£–∫–∞–∂–∏—Ç–µ seed-—Ñ—Ä–∞–∑—É –∏ –æ–∂–∏–¥–∞–µ–º—ã–π –∞–¥—Ä–µ—Å', 'error', 'seedStatus');
                return;
            }
            showStatus('–°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ –ø–µ—Ä–µ–±–æ—Ä–∞...', 'info', 'seedStatus');
            log('–û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–¥–∞—á–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä...', 'info', 'seedLog');
            fetch('/api/task/create', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    Name: 'Seed Search',
                    TargetAddress: address,
                    KnownWords: seedPhrase,
                    WordCount: seedPhrase.split(' ').length,
                    Language: 'english',
                    StartIndex: 0,
                    EndIndex: 0,
                    BatchSize: 1000,
                    BlockSize: 100000
                })
            })
            .then(r => r.json())
            .then(data => {
                if (data.success) {
                    showStatus('–ó–∞–¥–∞—á–∞ —Å–æ–∑–¥–∞–Ω–∞. ID: ' + data.taskId, 'success', 'seedStatus');
                    log('–ó–∞–¥–∞—á–∞ —Å–æ–∑–¥–∞–Ω–∞. ID: ' + data.taskId, 'success', 'seedLog');
                    document.getElementById('seedPhrase').value = '';
                    document.getElementById('address').value = '';
                } else {
                    showStatus('–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á–∏: ' + (data.message || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞'), 'error', 'seedStatus');
                    log('–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á–∏: ' + (data.message || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞'), 'error', 'seedLog');
                }
            })
            .catch(e => {
                showStatus('–û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ' + e.message, 'error', 'seedStatus');
                log('–û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ' + e.message, 'error', 'seedLog');
            });
        }
        function stopSeedSearch() {
            showStatus('–ü–µ—Ä–µ–±–æ—Ä –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω (–∑–∞–≥–ª—É—à–∫–∞)', 'warning', 'seedStatus');
            log('–ü–µ—Ä–µ–±–æ—Ä –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω (–∑–∞–≥–ª—É—à–∫–∞)', 'warning', 'seedLog');
        }
        function loadAgents() {
            showStatus('–ó–∞–≥—Ä—É–∑–∫–∞ –∞–≥–µ–Ω—Ç–æ–≤ (–∑–∞–≥–ª—É—à–∫–∞)', 'info', 'agentsStatus');
            const table = document.getElementById('agentsTable');
            table.innerHTML = '<tr><td>Agent1</td><td>Active</td><td>4</td><td>2024-06-20 12:00</td><td><button class="btn btn-danger" disabled>–û—Ç–∫–ª—é—á–∏—Ç—å</button></td></tr>';
        }

        function addSeedTask() {
            const val = document.getElementById('newSeedTask').value;
            if (!val) return;
            fetch('/api/agent/add-task', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(val)
            }).then(r => r.json()).then(data => {
                if (data.success) log('–ó–∞–¥–∞—á–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞', 'success', 'seedTaskLog');
                else log('–û—à–∏–±–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞—á–∏', 'error', 'seedTaskLog');
            });
        }

        function loadSeedTasks() {
            fetch('/api/seed-task').then(r => r.json()).then(tasks => {
                const table = document.getElementById('seedTasksTable');
                table.innerHTML = '';
                for (const t of tasks) {
                    table.innerHTML += `<tr>
                        <td>${t.seedPhrase}</td>
                        <td>${t.status}</td>
                        <td>
                            <input type='number' min='1' value='${t.threads}' id='threads_${t.id}' style='width:60px;'>
                            <button class='btn btn-primary' onclick='setSeedTaskThreads("${t.id}", document.getElementById("threads_${t.id}").value)'>–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                        </td>
                        <td>
                            <button class='btn btn-success' onclick='startSeedTask("${t.id}")'>–°—Ç–∞—Ä—Ç</button>
                            <button class='btn btn-danger' onclick='stopSeedTask("${t.id}")'>–°—Ç–æ–ø</button>
                        </td>
                    </tr>`;
                }
            });
        }
        function startSeedTask(id) { fetch(`/api/seed-task/start/${id}`,{method:'POST'}).then(loadSeedTasks); }
        function stopSeedTask(id) { fetch(`/api/seed-task/stop/${id}`,{method:'POST'}).then(loadSeedTasks); }
        function setSeedTaskThreads(id, threads) { fetch(`/api/seed-task/threads/${id}`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(Number(threads))}).then(loadSeedTasks); }
    </script>
    <button onclick="logout()" style="position:fixed;top:20px;right:20px;z-index:1000;" class="btn btn-danger">–í—ã–π—Ç–∏</button>
</body>
</html> 